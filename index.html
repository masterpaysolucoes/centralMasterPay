<!DOCTYPE html>
<html lang="pt-BR"> 
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Página de Sugestões</title>
    <script src="https://kit.fontawesome.com/a076d05399.js" crossorigin="anonymous"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f4f4f4;
        }
        header {
            background-color: #333;
            color: white;
            padding: 1rem 0;
            text-align: center;
        }
        nav {
            background-color: #444;
            padding: 0.5rem;
        }
        nav ul {
            list-style: none;
            padding: 0;
            margin: 0;
            display: flex;
            justify-content: center;
        }
        nav ul li {
            margin: 0 1rem;
            text-align: center;
        }
        nav ul li a {
            color: white;
            text-decoration: none;
            font-weight: bold;
            display: block;
            padding: 0.5rem;
        }
        nav ul li a:hover {
            text-decoration: underline;
        }
        nav ul li i {
            font-size: 1.5rem;
            display: block;
            margin-bottom: 0.5rem;
        }
        main {
            padding: 2rem;
            text-align: center;
        }
        .section {
            display: none;
        }
        .section.active {
            display: block;
        }
        .status-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 2rem;
        }
        .status-table th, .status-table td {
            border: 1px solid #ddd;
            padding: 8px;
        }
        .status-table th {
            background-color: #333;
            color: white;
        }
        .status-table tr:nth-child(even) {
            background-color: #f2f2f2;
        }
        .status-table tr:hover {
            background-color: #ddd;
        }
        footer {
            background-color: #333;
            color: white;
            text-align: center;
            padding: 1rem 0;
            position: fixed;
            bottom: 0;
            width: 100%;
        }
        .delete-btn {
            color: red;
            font-weight: bold;
            cursor: pointer;
        }
    </style>
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.0.2/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.0.2/firebase-firestore.js"></script>
    <script>
        // Configuração do Firebase
        const firebaseConfig = {
            apiKey: "AIzaSyClfTXvGqPzMA0hd8TvAWyOUcYOfMrE3DM",
            authDomain: "masterpay-6beee.firebaseapp.com",
            projectId: "masterpay-6beee",
            storageBucket: "masterpay-6beee.firebasestorage.app",
            messagingSenderId: "634711659840",
            appId: "1:634711659840:web:0a2fa133bcbd3c525a16a5",
            measurementId: "G-9PTX487931"
        };

        // Inicializar Firebase
        firebase.initializeApp(firebaseConfig);

        // Obter referência ao Firestore
        const db = firebase.firestore();

        function showSection(sectionId) {
            const sections = document.querySelectorAll('.section');
            sections.forEach(section => section.classList.remove('active'));
            document.getElementById(sectionId).classList.add('active');
        }

        function addSuggestion(event) {
            event.preventDefault();
            const nomeConteudo = document.getElementById('nomeConteudo').value.trim();
            const comentariosConteudo = document.getElementById('comentariosConteudo').value.trim();
            const date = new Date().toLocaleString();

            if (nomeConteudo === "") {
                alert("Por favor, insira o nome do conteúdo!");
                return;
            }

            const suggestion = {
                nomeConteudo,
                comentariosConteudo,
                date,
                status: "Sugestão em aberto"
            };

            // Salvar a sugestão no Firestore
            db.collection('suggestions').add(suggestion)
                .then(() => {
                    alert("Sugestão enviada com sucesso!");
                    document.getElementById('nomeConteudo').value = "";
                    document.getElementById('comentariosConteudo').value = "";
                    getSuggestions(); // Atualizar as sugestões exibidas
                })
                .catch((error) => {
                    console.error("Erro ao salvar a sugestão: ", error);
                    alert('Erro ao enviar a sugestão');
                });
        }

        function getSuggestions() {
            db.collection('suggestions').get()
                .then((querySnapshot) => {
                    const statusTableBody = document.querySelector('#status tbody');
                    statusTableBody.innerHTML = '';

                    querySnapshot.forEach((doc) => {
                        const suggestion = doc.data();
                        const statusRow = `
                            <tr>
                                <td>${suggestion.date}</td>
                                <td>${suggestion.nomeConteudo}</td>
                                <td>${suggestion.status}</td>
                            </tr>
                        `;
                        statusTableBody.innerHTML += statusRow;
                    });
                })
                .catch((error) => {
                    console.error("Erro ao obter as sugestões: ", error);
                    alert('Erro ao buscar sugestões');
                });
        }

        // Chamar a função quando a página for carregada
        window.onload = getSuggestions;

    </script>
</head>
<body>
    <header>
        <h1>Página de Sugestões</h1>
    </header>
    <nav>
        <ul>
            <li><a href="#" onclick="showSection('inicio')"><i class="fas fa-home"></i>Início</a></li>
            <li><a href="#" onclick="showSection('conteudo')"><i class="fas fa-film"></i>Sugestão de Conteúdo</a></li>
            <li><a href="#" onclick="showSection('status')"><i class="fas fa-clock"></i>Status de Sugestões</a></li>
        </ul>
    </nav>

    <main>
        <section id="inicio" class="section active">
            <h2>Bem-vindo à Página de Sugestões!</h2>
            <p>Escolha uma opção no menu acima para continuar.</p>
        </section>

        <section id="conteudo" class="section">
            <h2>Sugestão de Conteúdo</h2>
            <form onsubmit="addSuggestion(event)">
                <label for="nomeConteudo">Nome do Filme, Série ou Canal:</label>
                <input type="text" id="nomeConteudo" name="nomeConteudo"><br><br>
                <label for="comentariosConteudo">Comentários (opcional):</label>
                <textarea id="comentariosConteudo" name="comentariosConteudo"></textarea><br><br>
                <button type="submit">Enviar Sugestão</button>
            </form>
        </section>

        <section id="status" class="section">
            <h2>Status de Sugestões</h2>
            <table class="status-table">
                <thead>
                    <tr>
                        <th>Data</th>
                        <th>Sugestão</th>
                        <th>Status</th>
                    </tr>
                </thead>
                <tbody></tbody>
            </table>
        </section>
    </main>

    <footer>
        <p>&copy; 2025 - Página de Sugestões</p>
    </footer>
</body>
</html>
